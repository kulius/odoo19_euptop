<odoo>

  <record id="view_tree_payslip_withholding_statement_sheet" model="ir.ui.view">
    <field name="name">payslip.withholding.statement.sheet.list</field>
    <field name="model">payslip.withholding.statement.sheet</field>
    <field name="arch" type="xml">
      <list>
        <field name="name" />
        <field name="apply_year" />
        <field name="date_from" />
        <field name="date_to" />
        <field name="company_id" column_invisible="1" />
      </list>
    </field>
  </record>

  <record id="view_form_payslip_withholding_statement_sheet" model="ir.ui.view">
    <field name="name">payslip.withholding.statement.sheet.form</field>
    <field name="model">payslip.withholding.statement.sheet</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <button string="下載Excel" type="object" class="btn-primary" name="download_excel"/>
          <button string="下載CSV" type="object" class="btn-primary" name="download_csv"/>
          <!-- <button string="下載TXT" type="object" class="btn-primary" name="download_txt"/> -->
        </header>
        <sheet>
          <group>
            <group>
              <field name="name" />
              <field name="company_id" />
            </group>
            <group>
              <field name="apply_year" widget="year" />
              <label for="date_from" />
              <div>
                <field nolabel="1"
                  name="date_from"
                  widget="daterange"
                  class="oe_inline"
                  options="{'related_end_date': 'date_to'}"
                  force_save="1"
                  readonly="1"
                  placeholder="申報計算日-起" /> ~ <field nolabel="1"
                  name="date_to"
                  widget="daterange"
                  class="oe_inline"
                  options="{'related_start_date': 'date_from'}"
                  force_save="1"
                  readonly="1"
                  placeholder="申報計算日-迄" />
              </div>
            </group>
          </group>
          <button type="object" name="general_statement" string="產生申報資料" class="btn-primary" 
          confirm="確定要產生申報資料嗎？ 若已有資料存在，將會清除既有資料！"/>
          <notebook>
            <page string="申報資料">

              <field name="statement_ids">
                <list default_order="serial_number" class="o_nowrap">
                  <field name="city_agency" />
                  <field name="reporting_unit_tax_id" readonly="1"/>
                  <field name="serial_number" />
                  <field name="reporting_unit_tax_id" />
                  <field name="income_note" />
                  <field name="income_format" />
                  <field name="recipient_tax_id" />
                  <field name="id_type" />
                  <field name="payable_add_subtotal" />
                  <field name="withholding_tax" />
                  <field name="net_payment" />
                  <field name="tax_credit_ratio" />
                  <field name="allocation_count" />
                  <field name="ex_dividend_date" />
                  <field name="software_note" />
                  <field name="error_note" />
                  <field name="payment_year" />
                  <field name="recipient_name" />
                  <field name="recipient_address" />
                  <field name="income_period" />
                  <field name="self_retire" />
                  <field name="capital_reserve_cash_dividend" />
                  <field name="stock_dividend" />
                  <field name="stock_dividend_shares" />
                  <field name="tax_credit_note" />
                  <field name="statement_issue_method" />
                  <field name="is_over_183_days" />
                  <field name="residence_country_code" />
                  <field name="tax_treaty_code" />
                  <field name="liquidation_date" />
                  <field name="tax_identification_number" />
                </list>
              </field>
              <style>
                .o_nowrap .o_tree_column {
                    white-space: nowrap !important;
                }
              </style>
            </page>
            <page string="項目預設值設定">
              <group>
                <group>
                  <field name="city_agency" />
                  <field name="reporting_unit_tax_id" />
                  <field name="income_note" />
                  <field name="income_format" />
                  <field name="id_type" />
                  <field name="tax_credit_ratio" />
                  <field name="allocation_count" />
                  <field name="ex_dividend_date" />
                  <field name="software_note" />
                  <field name="error_note" />
                  <field name="payment_year" />
                </group>
                <group>
                  <field name="income_period" />
                  <field name="capital_reserve_cash_dividend" />
                  <field name="stock_dividend" />
                  <field name="stock_dividend_shares" />
                  <field name="tax_credit_note" />
                  <field name="statement_issue_method" />
                  <field name="is_over_183_days" />
                  <field name="residence_country_code" />
                  <field name="tax_treaty_code" />
                  <field name="liquidation_date" />
                  <field name="tax_identification_number" />
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="view_tree_payslip_withholding_statement" model="ir.ui.view">
    <field name="name">payslip.withholding.statement.list</field>
    <field name="model">payslip.withholding.statement</field>
    <field name="arch" type="xml">
      <list>
        <field name="statement_sheet_id" />
        <field name="employee_id" />
        <field name="payment_year" />
        <field name="payable_add_subtotal" />
        <field name="withholding_tax" />
        <field name="net_payment" />
      </list>
    </field>
  </record>

  <record id="action_payslip_withholding_statement_sheet" model="ir.actions.act_window">
    <field name="name">所得申報總表</field>
    <field name="res_model">payslip.withholding.statement.sheet</field>
    <field name="view_mode">list,form</field>
  </record>

  <record id="action_payslip_withholding_statement" model="ir.actions.act_window">
    <field name="name">所得申報紀錄</field>
    <field name="res_model">payslip.withholding.statement</field>
    <field name="view_mode">list,form</field>
    <field name="context">{'search_default_order': 'payment_year desc',
            'group_by' : 'statement_sheet_id'}</field>
  </record>

</odoo>